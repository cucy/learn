# demo1 

```go
// main

package main

import (
	"net/http"
	"html/template"
	"log"
)

// 自定义类型返回 "你好,gopher"
type Gopher struct {
	Name string
}

// Handler for the hello_gopher router
func helloGopherHandler(w http.ResponseWriter, r *http.Request) {

	var gophername string

	gophername = r.URL.Query().Get("gophername")
	if gophername == "" {
		gophername = "gopher"
	}

	gopher := Gopher{Name: gophername}
	renderTemplate(w, "./templates/greeting.html", gopher)
}

// Template rendering function
func renderTemplate(w http.ResponseWriter, tempFile string, tempDate interface{}) {
	// 解析模板
	t, err := template.ParseFiles(tempFile)
	if err != nil {
		log.Fatal("解析模板失败:", err)
	}
	// 执行渲染数据
	t.Execute(w, tempDate)
}

func main() {
	http.HandleFunc("/hello_gopher", helloGopherHandler)
	http.ListenAndServe(":8080", nil)
}

```





```html
<!-- greeting.html -->

<!DOCTYPE html>
<html>
<body>
<h1>你好,  {{.Name}}!</h1>
</body>
</html>

```



# demo2

```
go_temp1/
├── main.go
├── static
│   ├── css
│   │   └── gopherface.css
│   └── images
│       └── gogopher.png
├── templates
│   └── socialmediapost.html
└── vender
    └── socialmedia
        ├── moodstate_string.go
        └── socialmedia.go
```



```go
// main.go
// 显示媒体类型
func displaySocialMediaPostHandler(w http.ResponseWriter, r *http.Request) {
	myPost := socialmedia.NewPost("张三go开发工程师", socialmedia.Moods["thrilled"],
		"Golang 主页!", "看看GO网站！", "https://golang.google.cn",
		"/images/gogopher.png", "", []string{"go", "golang", "programming language"})
	fmt.Printf("myPost: %+v\n", myPost)
	renderTemplate(w, "./templates/socialmediapost.html", myPost)
}

// Template rendering function
func renderTemplate(w http.ResponseWriter, tempFile string, tempDate interface{}) {
	// 解析模板
	t, err := template.ParseFiles(tempFile)
	if err != nil {
		log.Fatal("解析模板失败:", err)
	}
	// 执行渲染数据
	t.Execute(w, tempDate)
}

func main() {

	http.HandleFunc("/display-social-media-post", displaySocialMediaPostHandler)
	// 处理静态文件 css,js,png
	http.Handle("/", http.FileServer(http.Dir("./static")))
	http.ListenAndServe(":8080", nil)
}
```

```go
// moodstate_string.go

// Code generated by "stringer -type=MoodState"; DO NOT EDIT

package socialmedia

import "fmt"

const _MoodState_name = "MoodStateNeutralMoodStateHappyMoodStateSadMoodStateAngryMoodStateHopefulMoodStateThrilledMoodStateBoredMoodStateShyMoodStateComicalMoodStateOnCloudNine"

var _MoodState_index = [...]uint8{0, 16, 30, 42, 56, 72, 89, 103, 115, 131, 151}

func (i MoodState) String() string {
	if i < 0 || i >= MoodState(len(_MoodState_index)-1) {
		return fmt.Sprintf("MoodState(%d)", i)
	}
	return _MoodState_name[_MoodState_index[i]:_MoodState_index[i+1]]
}


// ------------------------------------------
// socialmedia.go

// 包社交媒体实现社交媒体Web应用程序所需的公共功能。
//  Package SocialMedia implements common functionality needed
// for social media web applications.
package socialmedia

import "time"

//go:generate stringer -type=MoodState
type MoodState int

// All possible mood states.
const (
	MoodStateNeutral MoodState = iota
	MoodStateHappy
	MoodStateSad
	MoodStateAngry
	MoodStateHopeful
	MoodStateThrilled
	MoodStateBored
	MoodStateShy
	MoodStateComical
	MoodStateOnCloudNine
)

// AuditableContent types are meant to be embedded into types we want to keep a
// check on for auditing purposes
type AuditableContent struct {
	TimeCreated  time.Time
	TimeModified time.Time
	CreatedBy    string
	ModifiedBy   string
}

// Post represents a Social Media Post type.
type Post struct {
	AuditableContent // Embedded type
	Caption          string
	MessageBody      string
	URL              string
	ImageURI         string
	ThumbnailURI     string
	Keywords         []string
	Likers           []string
	AuthorMood       MoodState
}

// Map that holds the various mood states with keys to serve as
// aliases to their respective mood states.
var Moods map[string]MoodState

// The init() function is responsible for initializing the mood state
func init() {
	Moods = map[string]MoodState{"neutral": MoodStateNeutral, "happy": MoodStateHappy, "sad": MoodStateSad, "angry": MoodStateAngry, "hopeful": MoodStateHopeful, "thrilled": MoodStateThrilled, "bored": MoodStateBored, "shy": MoodStateShy, "comical": MoodStateComical, "cloudnine": MoodStateOnCloudNine}
}

// NewPost is responsible for creating an instance of the Post type.
func NewPost(username string, mood MoodState, caption string, messageBody string, url string, imageURI string, thumbnailURI string, keywords []string) *Post {

	auditableContent := AuditableContent{CreatedBy: username, TimeCreated: time.Now()}
	return &Post{Caption: caption, MessageBody: messageBody, URL: url, ImageURI: imageURI, ThumbnailURI: thumbnailURI, AuthorMood: mood, Keywords: keywords, AuditableContent: auditableContent}
}
```

```html
<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" type="text/css" href="/css/gopherface.css" />
</head>
<body>
<h1>社会媒体帖子实例</h1>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>

<div class="smpostContainer">

	<div class="caption">
		<a target="_blank" href="{{.URL}}">{{.Caption}}</a>
	</div>

	<div class="author">
		<br/>
		<span class="createdby">{{.CreatedBy}}</span><br/>
		<span class="creationtime">{{.TimeCreated}}</span>
	</div>

	<div class="imagePreview">
		<a target="_blank" href="{{.URL}}"><img src="{{.ImageURI}}"></a>
	</div>

	<div class="msgBody">
		{{.MessageBody}}
	</div>

</div>


</body>
</html>
```

